#N canvas 45 23 1280 686 10;
#X obj 1009 549 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 485 -15 vsl 50 200 80 100 0 0 \$0-oxyg-send \$0-oxyg-recv :92.2613
0 -20 0 30 -4032 -1 -1 0 1;
#X obj 916 456 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 193 86 r \$0-oxyg-send;
#X obj 194 162 s \$0-oxyg-recv;
#X obj 839 563 *~ 0.2;
#X obj 849 735 dac~;
#X msg 194 -50 \; pd dsp 0 \;;
#X msg 195 0 \; pd dsp 1 \;;
#X obj 971 465 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 1340 168 5 0 0 0 - - -;
#X floatatom 1361 248 5 0 0 0 - - -;
#X floatatom 1426 246 5 0 0 0 - - -;
#X obj 1338 307 expr $f1*$f2;
#X floatatom 1411 346 5 0 0 0 - - -;
#X obj 1196 319 *~;
#X msg 193 124 label :\$1;
#X obj 675 275 < 93;
#X obj 756 275 > 92;
#X obj 675 352 expr $f1*$f2;
#X obj 675 426 change;
#X floatatom 682 454 5 0 0 0 - - -;
#X obj 676 387 expr if($f1==1 \, 0 \, 1);
#X obj 947 192 expr if($f1 < 92 \, 1 \, 0);
#X floatatom 966 222 5 0 0 0 - - -;
#X obj 472 242 - 92.5;
#X floatatom 490 318 5 0 0 0 - - -;
#X obj 385 234 / 100;
#X obj 1194 568 vline~;
#X obj 1194 596 pow~ 2;
#X obj 1199 445 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 848 661 *~;
#X floatatom 797 372 5 0 0 0 - - -;
#X floatatom 794 300 5 0 0 0 - - -;
#X floatatom 702 296 5 0 0 0 - - -;
#X floatatom 770 422 5 0 0 0 - - -;
#X obj 724 323 t b f;
#X obj 1386 278 t b f;
#X obj 826 -5 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 1342 217 >= 90;
#X obj 1407 217 <= 95;
#X obj 1199 470 metro 1000;
#X obj 201 338 expr $f1*$f2;
#X obj 201 412 change;
#X obj 202 373 expr if($f1==1 \, 0 \, 1);
#X floatatom 323 358 5 0 0 0 - - -;
#X floatatom 320 286 5 0 0 0 - - -;
#X floatatom 228 282 5 0 0 0 - - -;
#X floatatom 296 408 5 0 0 0 - - -;
#X obj 250 309 t b f;
#X obj 1124 61 nbx 5 14 -1 1 0 0 empty empty empty 0 -8 0 10 -262144
-1 -1 -1 256;
#X obj 1209 167 *~ 0;
#X obj 1209 209 +~;
#X text 1023 -24 Feedforward comb filter;
#X text 1105 23 coeff a;
#X floatatom 487 269 5 0 0 0 - - -;
#X floatatom 492 380 5 0 0 0 - - -;
#X text 1198 -21 Delay;
#X obj 1285 134 delread4~ \$0-buffer2;
#X obj 1302 -32 pink~;
#X obj 1283 95 delwrite~ \$0-buffer2;
#X obj 1202 43 nbx 5 14 0 1e+37 0 0 empty empty empty 0 -8 0 10 -262144
-1 -1 100 256;
#X msg 1191 7 100;
#X obj 1097 572 *~ 0.02;
#X msg 1072 46 -1;
#X obj 472 350 expr if($f1 > 0.16 \, $f1 \, 0.16);
#X obj 201 261 <= 0.95;
#X obj 282 261 >= 0.9;
#X obj 472 291 expr 0.4/abs($f1);
#X msg 1194 539 1 1 \, 1 1 200 \, 0 1 175;
#X text 769 -24 Start pulse oximeter;
#X text 372 -40 Oxygen saturation;
#X obj 196 49 loadbang;
#X text 87 29 Initializing FM and comb filter parameters;
#X text 820 165 For SpO2 levels below 92% we have a falling tone \,
a rising tone otherwise;
#X text 632 235 Between 29 and 93% SpO2 the pulse is stationary;
#X text 943 519 Resets shepard tone for every pulse;
#X text 1219 431 Sends a bang every 1000ms which corresponds to a pulse
of 60 bpm;
#X text 1274 561 ASDR Envelope of each pulse;
#X text 1312 -13 Pink noise for SpO2 values between 92 and 93%;
#X text 442 203 Scaling the SpO2 level such that 0.1% change in SpO2
results in an interval change of 100 Cent;
#X text 28 230 FM synthesis is used below 90% or above 95% of SpO2
level;
#X obj 837 506 Shepard_Tone;
#X connect 0 0 82 2;
#X connect 1 0 17 0;
#X connect 1 0 18 0;
#X connect 1 0 23 0;
#X connect 1 0 25 0;
#X connect 1 0 27 0;
#X connect 1 0 10 0;
#X connect 2 0 82 4;
#X connect 3 0 16 0;
#X connect 5 0 31 0;
#X connect 9 0 82 5;
#X connect 10 0 39 0;
#X connect 10 0 40 0;
#X connect 13 0 14 0;
#X connect 13 0 15 1;
#X connect 15 0 63 0;
#X connect 16 0 4 0;
#X connect 17 0 19 0;
#X connect 17 0 34 0;
#X connect 18 0 33 0;
#X connect 18 0 36 0;
#X connect 19 0 22 0;
#X connect 19 0 32 0;
#X connect 20 0 21 0;
#X connect 20 0 2 0;
#X connect 22 0 20 0;
#X connect 22 0 35 0;
#X connect 23 0 24 0;
#X connect 23 0 9 0;
#X connect 25 0 55 0;
#X connect 25 0 68 0;
#X connect 27 0 66 0;
#X connect 27 0 67 0;
#X connect 28 0 29 0;
#X connect 29 0 31 1;
#X connect 30 0 41 0;
#X connect 31 0 6 0;
#X connect 31 0 6 1;
#X connect 36 0 19 0;
#X connect 36 1 19 1;
#X connect 37 0 13 0;
#X connect 37 1 13 1;
#X connect 38 0 30 0;
#X connect 39 0 11 0;
#X connect 39 0 13 0;
#X connect 40 0 12 0;
#X connect 40 0 37 0;
#X connect 41 0 69 0;
#X connect 41 0 0 0;
#X connect 42 0 44 0;
#X connect 42 0 45 0;
#X connect 43 0 82 0;
#X connect 44 0 43 0;
#X connect 44 0 48 0;
#X connect 49 0 42 0;
#X connect 49 1 42 1;
#X connect 50 0 51 1;
#X connect 51 0 52 0;
#X connect 52 0 15 0;
#X connect 58 0 51 0;
#X connect 59 0 52 1;
#X connect 59 0 60 0;
#X connect 61 0 58 0;
#X connect 62 0 61 0;
#X connect 63 0 6 0;
#X connect 63 0 6 1;
#X connect 64 0 50 0;
#X connect 65 0 56 0;
#X connect 65 0 82 3;
#X connect 66 0 42 0;
#X connect 66 0 47 0;
#X connect 67 0 46 0;
#X connect 67 0 49 0;
#X connect 68 0 26 0;
#X connect 68 0 65 0;
#X connect 69 0 28 0;
#X connect 72 0 64 0;
#X connect 72 0 62 0;
#X connect 72 0 82 1;
#X connect 82 0 5 0;
